<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>COA Redaction Tool</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>
</head>

<body>

<header>
    <h1>COA Redaction Tool</h1>
    <p>Template-driven PDF redaction engine</p>
</header>

<main>

    <!-- Left Panel -->
    <section id="left-panel">
        <h2>PDF Preview</h2>

        <input type="file" id="pdfInput" accept="application/pdf">

        <div class="button-row">
            <button id="detectBtn">Detect Company</button>
            <button id="previewBtn">Load Preview</button>
        </div>

        <!-- Page Navigation -->
        <div id="pageNav">
            <button id="prevPageBtn">◀ Prev</button>
            <span id="pageIndicator">Page 1 / 1</span>
            <button id="nextPageBtn">Next ▶</button>
        </div>

        <!-- Zoom controls -->
        <div id="zoomControls">
            <button id="zoomOutBtn">−</button>
            <span id="zoomLabel">100%</span>
            <button id="zoomInBtn">+</button>
        </div>

        <div id="previewContainer">
            <canvas id="pdfCanvas"></canvas>
            <div id="konvaContainer"></div>
        </div>
    </section>

    <!-- Right Panel -->
    <section id="right-panel">
        <h2>Template Editor</h2>

        <div id="templateInfo">
            <p><strong>Company:</strong> <span id="companyName">None</span></p>
            <p><strong>ID:</strong> <span id="companyId">None</span></p>
        </div>

        <h3>Detection Keywords</h3>
        <textarea id="detectionKeywords" placeholder="Comma-separated keywords"></textarea>

        <div id="editorToolbar">
            <label>
                <input type="checkbox" id="snapToGridCheckbox" checked>
                Snap to grid (10px)
            </label>
            <button id="undoBtn">Undo</button>
            <button id="redoBtn">Redo</button>
        </div>

        <h3>Zones (for current page)</h3>
        <div id="zonesList"></div>

        <div id="selectedZonePanel">
            <h3>Selected Zone</h3>
            <p id="noZoneSelected">No zone selected</p>
            <div id="zoneEditor" style="display:none">
                <label>
                    Label:
                    <input type="text" id="zoneLabelInput">
                </label>
                <label>
                    Style:
                    <select id="zoneStyleSelect">
                        <option value="black">Black</option>
                        <option value="white">White</option>
                        <option value="blur">Blur</option>
                    </select>
                </label>
                <div class="zone-actions">
                    <button id="duplicateZoneBtn">Duplicate Zone</button>
                    <button id="deleteZoneBtn" class="danger">Delete Zone</button>
                </div>
                <div class="coords-block">
                    <p><strong>Coordinates:</strong></p>
                    <p id="zoneCoords"></p>
                </div>
            </div>
        </div>

        <h3>Page Tools</h3>
        <div id="pageTools">
            <button id="copyPageZonesToAllBtn">Copy this page's zones to all pages</button>
        </div>

        <h3>Regex Rules</h3>
        <button id="addRuleBtn">Add Rule</button>
        <div id="rulesList"></div>

        <div id="templateActions">
            <button id="validateTemplateBtn">Validate Template</button>
            <button id="saveTemplateBtn" class="primary">Save Template</button>
        </div>
    </section>

</main>

<footer>
    <p>COA Redaction Tool — Local prototype</p>
</footer>

<script src="app.js"></script>
</body>
</html>
