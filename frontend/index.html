<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Redectio ‚Äì COA Redaction Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- PDF.js --> 
   <script src="pdfjs/pdf.min.js"></script>
   <script src="pdfjs/pdf.worker.min.js"></script>
   <!-- App entry -->
   <script type="module" src="app.js"></script>
</head>
<body>
  <div class="app-root">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <div class="logo-circle">R</div>
        <div class="logo-text">
          <div class="logo-title">Redectio</div>
          <div class="logo-subtitle">PDF Redaction</div>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item nav-item-active">
          <span class="nav-icon">üìÑ</span>
          <span class="nav-label">Redact COA</span>
        </button>
        <button class="nav-item" disabled>
          <span class="nav-icon">üìö</span>
          <span class="nav-label">Batch (coming)</span>
        </button>
        <button class="nav-item" disabled>
          <span class="nav-icon">‚öôÔ∏è</span>
          <span class="nav-label">Settings (coming)</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="footer-title">Templates</div>
        <ul id="templateList" class="template-list">
          <!-- Filled by Template_UI.js -->
        </ul>
        <div class="template-footer-actions">
          <button id="btnSaveTemplate" class="btn btn-ghost btn-small">Save Template</button>
          <button id="btnLoadTemplate" class="btn btn-ghost btn-small">Refresh Templates</button>
        </div>
      </div>
    </aside>

    <!-- Main layout -->
    <div class="main">
      <!-- Top bar -->
      <header class="topbar">
        <div class="topbar-left">
          <h1 class="topbar-title">COA Redaction Tool</h1>
          <span class="topbar-subtitle">Auto-detect company ¬∑ Auto-redact ¬∑ Manual fine-tune</span>
        </div>
        <div class="topbar-right">
          <span class="badge">Rasesh Pradhan</span>
        </div>
      </header>

      <!-- Content -->
      <main class="content">
        <!-- Left panel (4 sections) + Right viewer -->
        <div class="workspace">
          <!-- LEFT PANEL -->
          <aside class="left-panel">
            <!-- 1. Upload Panel -->
            <section class="panel-section" id="uploadSection">
              <h3 class="section-title">1. Upload Panel</h3>
              <p class="section-subtitle">Select or drop a PDF to begin.</p>
              <div id="appRoot" class="app-root"></div>
              <div id="dropZone" class="dropzone">
                <input id="fileInput" type="file" accept="application/pdf" class="dropzone-input" />
                <div class="dropzone-inner">
                  <div class="dropzone-icon">‚¨ÜÔ∏è</div>
                  <div class="dropzone-text-main">Drop PDF here or click to select</div>
                  <div class="dropzone-text-sub">Only PDF files are supported</div>
                  <div id="fileName" class="dropzone-filename"></div>
                </div>
              </div>

              <div class="panel-actions">
                <button id="btnRedact" class="btn btn-primary" disabled>Apply Manual Redactions</button>
                <button id="btnClear" class="btn btn-ghost">Clear</button>
              </div>

              <div id="statusText" class="status-text"></div>
            </section>

            <!-- 2. Navigation Tools -->
            <section class="panel-section" id="navigationSection">
              <h3 class="section-title">2. Navigation Tools</h3>
              <p class="section-subtitle">Search and highlight content across pages.</p>

              <label class="field-label" for="searchInput">Search text</label>
              <div class="search-row">
                <input
                  id="searchInput"
                  class="input-text"
                  type="text"
                  placeholder="Search in document..."
                />
              </div>

              <div class="inline-row">
                <button id="btnSearchPrev" class="btn btn-ghost btn-small">Prev</button>
                <button id="btnSearchNext" class="btn btn-ghost btn-small">Next</button>
                <span id="searchInfo" class="info-pill">0 / 0</span>
              </div>

              <div class="inline-row">
                <button id="btnSearchRedactAll" class="btn btn-ghost btn-small">
                  Redact All Matches
                </button>
              </div>

              <div class="inline-row">
                <button id="btnToggleHighlight" class="btn btn-ghost btn-small">
                  Highlight Mode
                </button>
              </div>
            </section>

            <!-- 3. Redaction Tools -->
            <section class="panel-section" id="redactionSection">
              <h3 class="section-title">3. Redaction Tools</h3>
              <p class="section-subtitle">Choose redaction mode and manage suggestions.</p>

              <div class="field-label">Redaction mode</div>
              <div class="btn-row">
                <button id="btnModeSelectText" class="btn btn-toggle btn-small">
                  Text Selection
                </button>
                <button id="btnModeDrawBox" class="btn btn-toggle btn-small btn-toggle-active">
                  Box Redaction
                </button>
              </div>

              <div class="inline-row">
                <button id="btnUndo" class="btn btn-ghost btn-small">Undo</button>
                <button id="btnRedo" class="btn btn-ghost btn-small">Redo</button>
              </div>

              <div class="field-label">Auto‚ÄëRedaction</div>
              <div class="dropdown">
                <button
                  id="btnAutoRedactMenu"
                  class="btn btn-primary btn-small dropdown-toggle"
                  type="button"
                >
                  Auto‚ÄëRedact ‚ñº
                </button>
                <div id="autoRedactDropdown" class="dropdown-menu hidden">
                  <button id="btnAutoTemplate" class="dropdown-item">Template Auto‚ÄëRedact</button>
                  <button id="btnAutoPatterns" class="dropdown-item">Pattern Auto‚ÄëRedact</button>
                  <button id="btnAutoOCR" class="dropdown-item">OCR Auto‚ÄëRedact</button>
                </div>
              </div>

              <div class="inline-row">
                <button id="btnAutoApply" class="btn btn-ghost btn-small" disabled>
                  Apply Suggestions
                </button>
                <button id="btnAutoClear" class="btn btn-ghost btn-small" disabled>
                  Clear Suggestions
                </button>
              </div>

              <div class="field-label">Template Redaction</div>
              <div class="btn-row">
                <button id="btnApplyTemplateRedact" class="btn btn-ghost btn-small">
                  Apply Template Redaction
                </button>
              </div>

              <div class="field-label">Page Redaction</div>
              <div class="btn-row">
                <button id="btnRedactCurrentPage" class="btn btn-ghost btn-small">
                  Redact Current Page
                </button>
              </div>

              <div class="field-label">Redaction Map</div>
              <div class="btn-row">
                <button id="btnExportRedactions" class="btn btn-ghost btn-small">
                  Export JSON
                </button>
                <button id="btnImportRedactions" class="btn btn-ghost btn-small">
                  Import JSON
                </button>
                <input
                  id="importRedactionsInput"
                  type="file"
                  accept="application/json"
                  class="hidden-input"
                />
              </div>

              <div class="field-label">Redaction Color</div>
              <div class="color-row">
                <input id="redactionColor" type="color" value="#000000" />
                <span class="color-label">Current color</span>
              </div>

              <div class="field-label">Review Mode</div>
              <div class="btn-row">
                <button id="btnReviewMode" class="btn btn-ghost btn-small">
                  Toggle Review Mode
                </button>
                <button id="btnShowOnlyAuto" class="btn btn-ghost btn-small">
                  Show Only Auto
                </button>
              </div>
            </section>
          </aside>

          <!-- RIGHT PANEL: PDF VIEWER -->
          <section class="viewer-panel">
            <div class="viewer-header">
              <span id="pageInfo" class="info-pill">Page 0 / 0</span>
              <span class="viewer-hint">Scroll to view all pages</span>
            </div>

            <div class="pdf-scroll-container">
              <div id="pdfPagesColumn" class="pdf-pages-column">
                <!-- Pages injected by app.js -->
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
